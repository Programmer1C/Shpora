
Процедура ФормированиеЗадач() Экспорт
	
	Запрос=Новый Запрос;
	Запрос.Текст="ВЫБРАТЬ
	             |	СведенияОСотрудникахСрезПоследних.Сотрудник
	             |ИЗ
	             |	РегистрСведений.СведенияОСотрудниках.СрезПоследних(&ДатаСреза, ) КАК СведенияОСотрудникахСрезПоследних";
				 
 Запрос.УстановитьПараметр("ДатаСреза", ТекущаяДата());
 
 Выборка=Запрос.Выполнить().Выбрать();
 
 Пока Выборка.Следующий() Цикл
	 НоваяЗадача = Задачи.ОтчетОПроделаннойРаботе.СоздатьЗадачу();
	 НоваяЗадача.Наименование="Отчет о проделанной работе";
	 НоваяЗадача.Дата=ТекущаяДата();
	 НоваяЗадача.Исполнитель=Выборка.Сотрудник;
	 НоваяЗадача.Записать();
КонецЦикла;
	
КонецПроцедуры


Функция ПолучитьСписокЗадач() Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст="ВЫБРАТЬ
	             |	ОтчетОПроделаннойРаботеЗадачиПоИсполнителю.Ссылка
	             |ИЗ
	             |	Задача.ОтчетОПроделаннойРаботе.ЗадачиПоИсполнителю(&Исполнитель, НЕ Выполнена) КАК ОтчетОПроделаннойРаботеЗадачиПоИсполнителю";
				 
	Запрос.УстановитьПараметр("Исполнитель", ПараметрыСеанса.ТекущийСотрудник);
	Выборка=Запрос.Выполнить().Выбрать();
	СписокЗадач=Новый Массив;
	Пока Выборка.Следующий() Цикл
		СписокЗадач.Добавить(Выборка.Ссылка);
	КонецЦикла;
	
	Возврат СписокЗадач;		
	
КонецФункции
